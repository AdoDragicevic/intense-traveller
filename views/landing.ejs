<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
	<script src="https://kit.fontawesome.com/d7c2cf6d44.js" crossorigin="anonymous"></script>
	<link href="https://fonts.googleapis.com/css2?family=Srisakdi:wght@400;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="/stylesheets/landing.css">
	<!-- ovaj link ispod samo projevri Å¡to je -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript" async></script>
    <title>Intense Traveller</title>
</head>
	
	
<body>

	<!-- Flash messages -->
	<section>
	
		<div class="container">
			
			<% if(error && error.length > 0){ %>
				<div class="alert alert-danger" role="alert">
					<%= error %>
				</div>
			<% } %>
			
			<% if(success && success.length > 0){ %>
				<div class="alert alert-success" role="alert">
					<%= success %>
				</div>
			<% } %>

    	</div>
		
	</section>
	
	
	<!-- Navbar -->
	<header>
	
		<nav class="navbar navbar-expand-lg navbar-dark fixed-top">

			<a class="navbar-brand" href="/"> <em>Intense Traveller </em> </a>

			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<!-- content -->
			<div class="collapse navbar-collapse" id="navbarSupportedContent">

				<!-- items on the left -->
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" href="/blog"> <i class="fas fa-feather-alt"></i> Journal <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item active">
						<a class="nav-link mr-3" href="/gallery"> <i class="fas fa-camera"></i> Gallery </a>
					</li>
				</ul>

				<!-- items on the right -->
				<ul class="navbar-nav ml-auto">
					
					<!-- decide what to show based on wheather or not the user is logged in -->
					<% if(!currentUser){ %>

						<!-- if user is not logged in, show logIn and SignUp links -->
						<li class="nav-item active">
							<a class="nav-link" href="/register"> <i class="fas fa-user-plus"></i> SignUp</a>
						</li>
						<li class="nav-item active">
							<a class="nav-link" href="/login"> <i class="fas fa-user"></i> LogIn</a>
						</li>

					<% }else{ %>

						<!-- notifications dropdown -->
						<li class="nav-item dropdown">
							<a id="navbarDropdown" class="nav-link dropdown-toggle" href="#" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> <i class="fas fa-bell"></i> <span class="badge"><%= notifications.length %></span> </a>

							<ul class="dropdown-menu bg-light" aria-labelledby="navbarDropdown">

								<!-- link to all notifications -->
								<li> 
									<a class="dropdown-item" href="/notifications">Past notifications</a> 
								</li>
								<div class="dropdown-divider">
								</div>

								<!-- show unseen notifications -->
								<% notifications.forEach(function(notification) { %>                          
									<a class="dropdown-item" href="/notifications/<%= notification.id %>"> 
										<%= notification.username %> published a new 
											<% if(notification.gallery){ %> 
												Gallery	
											<% }else{ %> 
												Journal 
										<% } %>
									</a>
								<% }); %>
							</ul>
						</li>	

						<!-- user profile link -->
						<li class="nav-item active">
							<a class="nav-link" href="/profile/<%= currentUser._id %>">Logged in as <em> <%= currentUser.username %> </em> </a>
						</li>

						<!-- logOut button -->
						<li class="nav-item ml-md-5">
							<a class="nav-link" href="/logout">LogOut</a>
						</li>
					
					<% } %>
					
				</ul>
				
			</div>
			
		</nav>

	</header>
    
	
	<!-- Title and subtitle -->
	<main>
		
		<div id="landing-header" class="text-center">
 		
			<h1> <em> Intense Traveller </em> </h1>

			<a id="landingSubtitle" class="stretched-link" href="/blog">
				<h3 class="d-none d-md-inline"> Share Your Dreams </h3>
			</a>
		
    	</div>
		
	</main>
	
    
    <!-- Changing background imgs -->
    <section>
	
		<ul class="slideshow">
			<li></li>
		    <li></li>
		    <li></li>
		    <li></li>
		    <li></li>
   		</ul>

	</section>
	

	
	


    <!-- Bootstap JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	
	<script>
	
		// I could not only use toggleClass, because the navbar is hiddent not only when navbar button is clicked, but also when the screen size changes. This can lead to class remaining on the navbar even after the screen size is increased, and then being hidden once the but

		$(".navbar > button").on("click", function(){
			
			if($(".navbar").height() > 100){
				$(".navbar").removeClass("navBg");
			}else{
				$(".navbar").addClass("navBg");
			}
			
		});
		
		$(window).resize(function(){
			if( $(window).width() > 989 ){
				$(".navbar").removeClass("navBg");
			}
			if( $(window).width() < 989 && $(".navbar").height() > 200 ){
				$(".navbar").addClass("navBg");
			}
		});
			

	</script>

  </body>
</html>